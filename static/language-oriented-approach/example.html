<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Example - The Language-Oriented Approach to API Development</title>


        <!-- Custom HTML head -->
        <meta name="twitter:card" content="summary_large_image" />
        <meta name="twitter:image" content="https://smizell.com/language-oriented-approach/card.png" />
        <meta name="twitter:title" content="Example - The Language-Oriented Approach to API Development" />
        <meta name="twitter:domain" content="https://smizell.com" />
        <meta name="twitter:description" content="An approach to API development that encourages people to create their own format for describing their APIs." />
        <meta name="og:image" content="https://smizell.com/language-oriented-approach/card.png" />
        <meta name="og:title" content="Example - The Language-Oriented Approach to API Development" />
        <meta name="og:description" content="An approach to API development that encourages people to create their own format for describing their APIs." />

        <meta name="description" content="An approach to API development that encourages people to create their own format for describing their APIs.">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="title-page.html">The Language-Oriented Approach to API Development</a></li><li class="chapter-item expanded affix "><a href="introduction.html">Introduction</a></li><li class="chapter-item expanded "><a href="challenges-of-openapi.html"><strong aria-hidden="true">1.</strong> Challenges of OpenAPI</a></li><li class="chapter-item expanded "><a href="explanation.html"><strong aria-hidden="true">2.</strong> Explanation</a></li><li class="chapter-item expanded "><a href="benefits.html"><strong aria-hidden="true">3.</strong> Benefits</a></li><li class="chapter-item expanded "><a href="tradeoffs.html"><strong aria-hidden="true">4.</strong> Tradeoffs</a></li><li class="chapter-item expanded "><a href="example.html" class="active"><strong aria-hidden="true">5.</strong> Example</a></li><li class="chapter-item expanded "><a href="getting-started.html"><strong aria-hidden="true">6.</strong> Getting started</a></li><li class="chapter-item expanded "><a href="when-to-use.html"><strong aria-hidden="true">7.</strong> When to use</a></li><li class="chapter-item expanded "><a href="other-approaches.html"><strong aria-hidden="true">8.</strong> Comparision with other approaches</a></li><li class="chapter-item expanded "><a href="case-studies.html"><strong aria-hidden="true">9.</strong> Case studies</a></li><li class="chapter-item expanded "><a href="conclusion.html"><strong aria-hidden="true">10.</strong> Concluding thoughts</a></li><li class="chapter-item expanded affix "><a href="acknowledgments.html">Acknowledgments</a></li><li class="chapter-item expanded affix "><a href="about-the-author.html">About the author</a></li><li class="chapter-item expanded affix "><a href="glossary.html">Glossary</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">The Language-Oriented Approach to API Development</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="example"><a class="header" href="#example">Example</a></h1>
<p>We can compare the language-oriented approach with a format-oriented approach that uses OpenAPI as the format. In this example, we'll build an API to keep track of automobiles.</p>
<h2 id="the-high-level-api-design"><a class="header" href="#the-high-level-api-design">The high-level API design</a></h2>
<p>For this example, consider an API that allows a consumer to do the following:</p>
<ul>
<li>Retrieve a collection of automobiles at the URL <code>/automobiles</code> using the <code>GET</code> HTTP method, which returns an array of automobile representations in JSON. The status code should be <code>200</code>.</li>
<li>Retrieve a single automobile item at <code>/automobiles/{id}</code> using the <code>GET</code> HTTP method, which returns an automobile representation in JSON. The status code should be <code>200</code>.</li>
</ul>
<p>In addition to these details, the automobile schema should include the properties <code>id</code>, <code>make</code>, <code>model</code>, and <code>year</code>, which should all be strings.</p>
<h2 id="extracting-the-rules-for-an-api-governance-model"><a class="header" href="#extracting-the-rules-for-an-api-governance-model">Extracting the rules for an API governance model</a></h2>
<p>We'll define a few rules regarding how we design APIs. This will be a small set compared to a full API governance model. The applicable rules for this design might be as follows:</p>
<ul>
<li>All collection URLs should be plural (e.g. <code>/automobiles</code>)</li>
<li>All item URLs should be the collection URL with an ID after it (e.g. <code>/automobiles/{id}</code>)</li>
<li>Use the <code>GET</code> method to retrieve the collection and item</li>
<li>Return a <code>200</code> on successful requests</li>
</ul>
<p>An organization might define these rules in a human-readable document and require people to use them when designing APIs. These rules—along with many others—become the foundation for the API governance model.</p>
<h2 id="how-would-we-define-this-in-openapi"><a class="header" href="#how-would-we-define-this-in-openapi">How would we define this in OpenAPI?</a></h2>
<p>In OpenAPI, we'd define the API this way:</p>
<pre><code class="language-yaml">openapi: 3.0.0
info:
  version: 1.0.0
  title: Automobile API
paths:
  /automobiles:
    get:
      operationId: list-automobiles
      responses:
        200:
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: &quot;#/components/schemas/AutomobileCollection&quot;
  /automobiles/{automobile_id}:
    get:
      operationId: retrieve-automobile
      parameters:
      - name: automobile_id
        in: path
        required: true
        schema: {type: &quot;string&quot;}
      responses:
        200:
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: &quot;#/components/schemas/AutomobileItem&quot;
components:
  schemas:
    AutomobileItem:
      type: object
      properties:
        id: {type: &quot;string&quot;}
        make: {type: &quot;string&quot;}
        model: {type: &quot;string&quot;}
        year: {type: &quot;string&quot;}
    AutomobileCollection:
      type: array
      items:
        $ref: &quot;#/components/schemas/AutomobileItem&quot;
</code></pre>
<p>Here we can encounter the challenge: how do we know that we defined the API correctly based on the API governance model? Did we use the correct URL patterns for collections and items? Did we use the right status codes? We'd need to codify the rules of our API governance model so that we can apply it to any OpenAPI document we write. This would require a linting tool to make these kinds of checks and provide feedback during the design process.</p>
<p>Designing an API this way requires a few things from us:</p>
<ul>
<li>We have to know OpenAPI</li>
<li>We have to be able to map our API conversation into OpenAPI</li>
<li>We have to know the API governance model and understand how to design APIs that follow the rules</li>
<li>We'd need tools that could apply the API governance model rules to an OpenAPI document</li>
</ul>
<p>To create a successful API program that uses OpenAPI, an organization needs to train people on OpenAPI, define API governance model rules, acquire tools, then create a path for teams to take to adopt this new workflow.</p>
<h2 id="how-would-we-define-this-api-using-a-language-oriented-approach"><a class="header" href="#how-would-we-define-this-api-using-a-language-oriented-approach">How would we define this API using a language-oriented approach?</a></h2>
<p>First, consider the following: what are the essentials to the design? Many of the technical details like URL patterns, HTTP methods, and status codes are fixed. The dynamic parts of the design are the resources and their properties. </p>
<p>Our first task would be to design a DSL. In an ideal situation, we'd create this prior to the API design process. For the current needs, we might design a DSL that includes the resource name, the resource's operations and properties, and each property's types. The DSL might look like this:</p>
<pre><code class="language-yaml">resources:
- name: &lt;resource-name&gt;
  operations:
  - &lt;operation-name: create, read, update, delete, or list&gt;
  properties:
    &lt;property-name&gt;: &lt;property-type&gt;
</code></pre>
<p>Using this DSL, we'd come up with a design for our API that looks like this:</p>
<pre><code class="language-yaml">resources:
- name: automobile
  operations:
  - list
  - retrieve
  properties:
    make: string
    model: string
    year: string
</code></pre>
<p>The OpenAPI document we wrote above by hand was 43 lines. This document using a DSL is nine. Where did all those other details go? Where are the status codes and schemas? What do the URLs look like? Where is the <code>id</code> property? These are details that can be left to the tooling that generates the OpenAPI document from the DSL. This is because we know how to generate the OpenAPI operations, include all the right status codes for the right operations, generate URLs based on the resource name, and create the schemas from the properties including the common properties like <code>id</code>. We can do this because the details around a large portion of the OpenAPI document are fixed. There's no imperative for people to learn how to write these details in OpenAPI—software can do the work for them.</p>
<p>It's important to note again that this example doesn't provide a full DSL. It's minimal and lacking a lot of features you'd need to build complete APIs. But it shows how you can start small and build up as the needs arise.</p>
<p>You can view a working example of this on GitHub at https://github.com/smizell/language-oriented-example. </p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="tradeoffs.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="getting-started.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="tradeoffs.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="getting-started.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
